{% comment %}theme-check-disable UndefinedObject{% endcomment %}
{{ 'footer.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign highlight_blocks = section.blocks | where: 'type', 'order_highlight'
-%}

{%- style -%}
  .footer {
    margin-top: {{ section.settings.margin_top | times: 0.75 | round: 0 }}px;
  }

  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
  }

  {%- if section.settings.background_image != blank -%}
    .footer__background-image {
      background-image: url('{{ section.settings.background_image | image_url: width: 1920 }}');
    }
    {%- if section.settings.background_overlay -%}
      .footer__background-overlay {
        background-color: rgba(0, 0, 0, {{ section.settings.background_overlay_opacity | divided_by: 100.0 }});
      }
    {%- endif -%}
  {%- endif -%}

  @media screen and (min-width: 750px) {
    .footer {
      margin-top: {{ section.settings.margin_top }}px;
    }

    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
    }
  }
{%- endstyle -%}

<footer class='footer section-{{ section.id }}-padding{% if section.settings.background_image != blank %} has-background-image{% endif %}'>
  {%- if section.settings.background_image != blank -%}
    <div class='footer__background-image'></div>
    {%- if section.settings.background_overlay -%}
      <div class='footer__background-overlay'></div>
    {%- endif -%}
  {%- endif -%}

  <div class='footer__content-wrapper page-width'>
    {%- comment -%} Sección Superior: Destacados de Pedidos {%- endcomment -%}
    {%- if highlight_blocks.size > 0 -%}
      <div class='footer__highlights'>
        {%- for block in highlight_blocks -%}
          <div class='footer__highlight-item' {{ block.shopify_attributes }}>
            {%- if block.settings.icon != blank -%}
              <div class='footer__highlight-icon'>
                {{ block.settings.icon | image_url: width: 80 | image_tag: loading: 'lazy', alt: block.settings.title }}
              </div>
            {%- endif -%}
            <div class='footer__highlight-text'>
              {%- if block.settings.title != blank -%}
                <div class='font-bold'>{{ block.settings.title }}</div>
              {%- endif -%}
              {%- if block.settings.description != blank -%}
                <div class='text-sm opacity-90 mt-1'>{{ block.settings.description }}</div>
              {%- endif -%}
            </div>
          </div>
        {%- endfor -%}
      </div>
    {%- endif -%}

    {%- comment -%} Sección Media: 3 Columnas de Información {%- endcomment -%}
    <div class='footer__info-section'>
      {%- comment -%} Columna 1: Contacto {%- endcomment -%}
      <div class='footer__contact-column'>
        {%- if section.settings.contact_title != blank -%}
          <h3 class='footer__contact-title'>{{ section.settings.contact_title }}</h3>
        {%- endif -%}

        {%- if section.settings.contact_phone != blank -%}
          <div class='footer__contact-item'>
            {%- if section.settings.contact_phone_icon != blank -%}
              <div class='footer__contact-icon'>
                {{
                  section.settings.contact_phone_icon
                  | image_url: width: 40
                  | image_tag: loading: 'lazy', alt: 'Phone icon'
                }}
              </div>
            {%- endif -%}
            <div class='footer__contact-text'>
              {%- if section.settings.contact_phone_label != blank -%}
                <div class='text-sm opacity-80 mb-1'>{{ section.settings.contact_phone_label }}</div>
              {%- endif -%}
              <a href='tel:{{ section.settings.contact_phone }}' class='footer__contact-link'>
                {{ section.settings.contact_phone }}
              </a>
            </div>
          </div>
        {%- endif -%}

        {%- if section.settings.contact_address != blank -%}
          <div class='footer__contact-item'>
            {%- if section.settings.contact_address_icon != blank -%}
              <div class='footer__contact-icon'>
                {{
                  section.settings.contact_address_icon
                  | image_url: width: 40
                  | image_tag: loading: 'lazy', alt: 'Address icon'
                }}
              </div>
            {%- endif -%}
            <div class='footer__contact-text'>
              {%- if section.settings.contact_address_label != blank -%}
                <div class='text-sm opacity-80 mb-1'>{{ section.settings.contact_address_label }}</div>
              {%- endif -%}
              <div class='text-red-500'>{{ section.settings.contact_address }}</div>
            </div>
          </div>
        {%- endif -%}

        {%- if section.settings.contact_email != blank -%}
          <div class='footer__contact-item'>
            {%- if section.settings.contact_email_icon != blank -%}
              <div class='footer__contact-icon'>
                {{
                  section.settings.contact_email_icon
                  | image_url: width: 40
                  | image_tag: loading: 'lazy', alt: 'Email icon'
                }}
              </div>
            {%- endif -%}
            <div class='footer__contact-text'>
              {%- if section.settings.contact_email_label != blank -%}
                <div class='text-sm opacity-80 mb-1'>{{ section.settings.contact_email_label }}</div>
              {%- endif -%}
              <a href='mailto:{{ section.settings.contact_email }}' class='footer__contact-link'>
                {{ section.settings.contact_email }}
              </a>
            </div>
          </div>
        {%- endif -%}
      </div>

      {%- comment -%} Columna 2: Atención al Cliente {%- endcomment -%}
      <div class='footer__menu-column'>
        {%- if section.settings.customer_service_title != blank -%}
          <h3 class='footer__menu-title'>{{ section.settings.customer_service_title }}</h3>
        {%- endif -%}
        {%- if section.settings.customer_service_menu != blank -%}
          <ul class='footer__menu-list'>
            {%- for link in section.settings.customer_service_menu.links -%}
              <li class='footer__menu-item'>
                <a href='{{ link.url }}' class='footer__menu-link'>
                  {{ link.title | escape }}
                </a>
              </li>
            {%- endfor -%}
          </ul>
        {%- endif -%}
      </div>

      {%- comment -%} Columna 3: EN PITS (Links Internos) {%- endcomment -%}
      <div class='footer__menu-column'>
        {%- if section.settings.internal_links_title != blank -%}
          <h3 class='footer__menu-title'>{{ section.settings.internal_links_title }}</h3>
        {%- endif -%}
        {%- if section.settings.internal_links_menu != blank -%}
          <ul class='footer__menu-list'>
            {%- for link in section.settings.internal_links_menu.links -%}
              <li class='footer__menu-item'>
                <a href='{{ link.url }}' class='footer__menu-link'>
                  {{ link.title | escape }}
                </a>
              </li>
            {%- endfor -%}
          </ul>
        {%- endif -%}
      </div>
    </div>

    {%- comment -%} Sección Newsletter {%- endcomment -%}
    {%- if section.settings.newsletter_enable -%}
      <div class='footer__newsletter-section'>
        <div class='footer__newsletter-content'>
          {%- if section.settings.newsletter_title != blank -%}
            <h3 class='footer__newsletter-title'>{{ section.settings.newsletter_title }}</h3>
          {%- endif -%}
          {%- if section.settings.newsletter_description != blank -%}
            <p class='footer__newsletter-description'>{{ section.settings.newsletter_description }}</p>
          {%- endif -%}
        </div>

        <div class='footer__newsletter-form-wrapper'>
          {%- form 'customer', id: 'ContactFooter', class: 'footer__newsletter-form' -%}
            <input type='hidden' name='contact[tags]' value='newsletter'>
            <div class='news-input'>
              <input
                id='NewsletterForm--{{ section.id }}'
                type='email'
                name='contact[email]'
                class='footer__newsletter-input'
                value='{{ form.email }}'
                aria-required='true'
                autocorrect='off'
                autocapitalize='off'
                autocomplete='email'
                {% if form.errors %}
                  autofocus
                  aria-invalid='true'
                  aria-describedby='ContactFooter-error'
                {% elsif form.posted_successfully? %}
                  aria-describedby='ContactFooter-success'
                {% endif %}
                placeholder='{{ section.settings.newsletter_placeholder | default: "INGRESA TU EMAIL" }}'
                required
              >
              <button
                type='submit'
                class='footer__newsletter-button'
                name='commit'
                id='Subscribe'
                aria-label='{{ "newsletter.button_label" | t }}'
              >
                <span class='svg-wrapper'>
                  {{- 'icon-arrow.svg' | inline_asset_content -}}
                </span>
              </button>
            </div>
            {%- if form.errors -%}
              <small class='footer__newsletter-error' id='ContactFooter-error'>
                <span class='svg-wrapper'>
                  {{- 'icon-error.svg' | inline_asset_content -}}
                </span>
                {{- form.errors.translated_fields.email | capitalize }}
                {{ form.errors.messages.email -}}
              </small>
            {%- endif -%}
            {%- if form.posted_successfully? -%}
              <div class='footer__newsletter-success' id='ContactFooter-success' tabindex='-1' autofocus>
                <span class='svg-wrapper'>
                  {{- 'icon-success.svg' | inline_asset_content -}}
                </span>
                {{- 'newsletter.success' | t }}
              </div>
            {%- endif -%}
          {%- endform -%}
        </div>
      </div>
    {%- endif -%}

    {%- comment -%} Sección Logo y Redes Sociales {%- endcomment -%}
    {%- liquid
      assign social_blocks = section.blocks | where: 'type', 'social_media'
    -%}
    {%- if section.settings.footer_logo != blank or social_blocks.size > 0 -%}
      <div class='footer__brand-section'>
        {%- if section.settings.footer_logo != blank -%}
          <div class='footer__logo'>
            {{ section.settings.footer_logo | image_url: width: 300 | image_tag: loading: 'lazy', alt: shop.name }}
          </div>
        {%- endif -%}

        {%- if social_blocks.size > 0 -%}
          <div class='footer__social'>
            {%- for block in social_blocks -%}
              {%- if block.settings.url != blank -%}
                <a
                  href='{{ block.settings.url }}'
                  class='footer__social-link'
                  target='_blank'
                  rel='noopener'
                  {{ block.shopify_attributes }}
                >
                  {%- assign social_name = block.settings.name | default: 'Social media' -%}
                  {%- if block.settings.icon != blank -%}
                    {{ block.settings.icon | image_url: width: 32 | image_tag: loading: 'lazy', alt: social_name }}
                  {%- else -%}
                    <span class='footer__social-text'>{{ social_name }}</span>
                  {%- endif -%}
                </a>
              {%- endif -%}
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>
    {%- endif -%}

    {%- comment -%} Sección Inferior: Copyright y Medios de Pago {%- endcomment -%}
  </div>
  <div class='footer__bottom-legals'>
    <div class='footer__bottom-section page-width'>
      <div class='footer__bottom-wrapper'>
        <div class='footer__copyright'>
          {%- if section.settings.copyright_text != blank -%}
            {{ section.settings.copyright_text }}
          {%- else -%}
            &copy; {{ 'now' | date: '%Y' }}, {{ shop.name }}
          {%- endif -%}
        </div>

        {%- if section.settings.payment_enable -%}
          <div class='footer__payment-section'>
            {%- if section.settings.payment_label != blank -%}
              <span class='footer__payment-label'>{{ section.settings.payment_label }}</span>
            {%- endif -%}
            <div class='footer__payment-list'>
              {%- if section.settings.payment_image_1 != blank -%}
                <div class='footer__payment-item'>
                  {{
                    section.settings.payment_image_1
                    | image_url: width: 80
                    | image_tag: loading: 'lazy', alt: 'Payment method'
                  }}
                </div>
              {%- endif -%}
              {%- if section.settings.payment_image_2 != blank -%}
                <div class='footer__payment-item'>
                  {{
                    section.settings.payment_image_2
                    | image_url: width: 80
                    | image_tag: loading: 'lazy', alt: 'Payment method'
                  }}
                </div>
              {%- endif -%}
              {%- if section.settings.payment_image_3 != blank -%}
                <div class='footer__payment-item'>
                  {{
                    section.settings.payment_image_3
                    | image_url: width: 80
                    | image_tag: loading: 'lazy', alt: 'Payment method'
                  }}
                </div>
              {%- endif -%}
              {%- if section.settings.payment_image_4 != blank -%}
                <div class='footer__payment-item'>
                  {{
                    section.settings.payment_image_4
                    | image_url: width: 80
                    | image_tag: loading: 'lazy', alt: 'Payment method'
                  }}
                </div>
              {%- endif -%}
              {%- if section.settings.payment_image_5 != blank -%}
                <div class='footer__payment-item'>
                  {{
                    section.settings.payment_image_5
                    | image_url: width: 80
                    | image_tag: loading: 'lazy', alt: 'Payment method'
                  }}
                </div>
              {%- endif -%}
              {%- if section.settings.payment_image_6 != blank -%}
                <div class='footer__payment-item'>
                  {{
                    section.settings.payment_image_6
                    | image_url: width: 80
                    | image_tag: loading: 'lazy', alt: 'Payment method'
                  }}
                </div>
              {%- endif -%}
            </div>
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</footer>

{% schema %}
{
  "name": "Footer",
  "max_blocks": 10,
  "blocks": [
    {
      "type": "order_highlight",
      "name": "Destacado de Pedido",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icono"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Título",
          "default": "ENVÍO GRATIS"
        },
        {
          "type": "text",
          "id": "description",
          "label": "Descripción",
          "default": "En compras superiores a $100.000"
        }
      ]
    },
    {
      "type": "social_media",
      "name": "Red Social",
      "settings": [
        {
          "type": "text",
          "id": "name",
          "label": "Nombre de la red social",
          "default": "Facebook"
        },
        {
          "type": "url",
          "id": "url",
          "label": "URL"
        },
        {
          "type": "image_picker",
          "id": "icon",
          "label": "Icono (SVG)"
        }
      ]
    }
  ],
  "settings": [
    {
      "type": "header",
      "content": "Fondo"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Imagen de fondo"
    },
    {
      "type": "checkbox",
      "id": "background_overlay",
      "label": "Activar overlay oscuro",
      "default": true,
      "info": "Mejora la legibilidad del texto sobre la imagen de fondo"
    },
    {
      "type": "range",
      "id": "background_overlay_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Opacidad del overlay",
      "default": 60,
      "info": "0% = transparente, 100% = completamente oscuro"
    },
    {
      "type": "header",
      "content": "Destacados de Pedidos"
    },
    {
      "type": "paragraph",
      "content": "Agrega bloques de tipo 'Destacado de Pedido' arriba para mostrar hasta 5 destacados"
    },
    {
      "type": "header",
      "content": "Información de Contacto"
    },
    {
      "type": "text",
      "id": "contact_title",
      "label": "Título de contacto",
      "default": "Llámanos cuando necesites resolver"
    },
    {
      "type": "text",
      "id": "contact_phone_label",
      "label": "Etiqueta de teléfono",
      "default": "Teléfono"
    },
    {
      "type": "text",
      "id": "contact_phone",
      "label": "Teléfono",
      "default": "+57 301 395 68 72"
    },
    {
      "type": "image_picker",
      "id": "contact_phone_icon",
      "label": "Icono de teléfono (SVG)"
    },
    {
      "type": "text",
      "id": "contact_address_label",
      "label": "Etiqueta de dirección",
      "default": "Dirección"
    },
    {
      "type": "textarea",
      "id": "contact_address",
      "label": "Dirección",
      "default": "Calle 36 # 48-14. MEDELLÍN - Colombia"
    },
    {
      "type": "image_picker",
      "id": "contact_address_icon",
      "label": "Icono de dirección (SVG)"
    },
    {
      "type": "text",
      "id": "contact_email_label",
      "label": "Etiqueta de email",
      "default": "Email"
    },
    {
      "type": "text",
      "id": "contact_email",
      "label": "Email",
      "default": "enpits@enpits.com"
    },
    {
      "type": "image_picker",
      "id": "contact_email_icon",
      "label": "Icono de email (SVG)"
    },
    {
      "type": "header",
      "content": "Atención al Cliente"
    },
    {
      "type": "text",
      "id": "customer_service_title",
      "label": "Título",
      "default": "ATENCIÓN AL CLIENTE"
    },
    {
      "type": "link_list",
      "id": "customer_service_menu",
      "label": "Menú de atención al cliente"
    },
    {
      "type": "header",
      "content": "Links Internos"
    },
    {
      "type": "text",
      "id": "internal_links_title",
      "label": "Título",
      "default": "EN PITS"
    },
    {
      "type": "link_list",
      "id": "internal_links_menu",
      "label": "Menú de links internos"
    },
    {
      "type": "header",
      "content": "Newsletter"
    },
    {
      "type": "checkbox",
      "id": "newsletter_enable",
      "label": "Habilitar newsletter",
      "default": true
    },
    {
      "type": "text",
      "id": "newsletter_title",
      "label": "Título",
      "default": "ENTÉRATE PRIMERO"
    },
    {
      "type": "textarea",
      "id": "newsletter_description",
      "label": "Descripción",
      "default": "Suscríbete para recibir ofertas exclusivas y novedades de repuestos antes que nadie"
    },
    {
      "type": "text",
      "id": "newsletter_placeholder",
      "label": "Placeholder del input",
      "default": "INGRESA TU EMAIL"
    },
    {
      "type": "header",
      "content": "Logo y Redes Sociales"
    },
    {
      "type": "paragraph",
      "content": "Agrega bloques de tipo 'Red Social' arriba para mostrar redes sociales. El logo se mostrará centrado junto a las redes sociales."
    },
    {
      "type": "image_picker",
      "id": "footer_logo",
      "label": "Logo del footer"
    },
    {
      "type": "header",
      "content": "Medios de Pago"
    },
    {
      "type": "checkbox",
      "id": "payment_enable",
      "label": "Habilitar medios de pago",
      "default": true
    },
    {
      "type": "text",
      "id": "payment_label",
      "label": "Etiqueta",
      "default": "Pago Seguro:"
    },
    {
      "type": "image_picker",
      "id": "payment_image_1",
      "label": "Imagen de medio de pago 1"
    },
    {
      "type": "image_picker",
      "id": "payment_image_2",
      "label": "Imagen de medio de pago 2"
    },
    {
      "type": "image_picker",
      "id": "payment_image_3",
      "label": "Imagen de medio de pago 3"
    },
    {
      "type": "image_picker",
      "id": "payment_image_4",
      "label": "Imagen de medio de pago 4"
    },
    {
      "type": "image_picker",
      "id": "payment_image_5",
      "label": "Imagen de medio de pago 5"
    },
    {
      "type": "image_picker",
      "id": "payment_image_6",
      "label": "Imagen de medio de pago 6"
    },
    {
      "type": "header",
      "content": "Copyright"
    },
    {
      "type": "textarea",
      "id": "copyright_text",
      "label": "Texto de copyright",
      "default": "Copyright © 2025 EN PITS. Todos los derechos reservados."
    },
    {
      "type": "header",
      "content": "Espaciado"
    },
    {
      "type": "range",
      "id": "margin_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Margen superior",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding superior",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding inferior",
      "default": 36
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Esquema de color",
      "default": "scheme-1"
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "order_highlight",
        "settings": {
          "title": "ENVÍO GRATIS"
        }
      },
      {
        "type": "order_highlight",
        "settings": {
          "title": "GARANTÍA DE PRODUCTOS"
        }
      },
      {
        "type": "order_highlight",
        "settings": {
          "title": "ENVÍO RÁPIDO"
        }
      }
    ]
  }
}
{% endschema %}
